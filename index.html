<!DOCTYPE html>
<html lang="en" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DeltaPro | Sovereign Talent Intelligence</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">

    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                fontFamily: { sans: ['Inter', 'sans-serif'], mono: ['JetBrains Mono', 'monospace'] },
                extend: {
                    colors: {
                        background: '#09090b', // Deep Black/Zinc
                        surface: '#18181b',    // Slightly lighter
                        border: '#27272a',     // Subtle borders
                        primary: '#d97706',    // Sovereign Amber (Dark Gold)
                        primaryHover: '#b45309',
                        success: '#10b981',    // Emerald
                    },
                    animation: {
                        'pulse-slow': 'pulse 3s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                    }
                }
            }
        }
    </script>
    <style>
        body { background-color: #09090b; color: #e4e4e7; overflow-x: hidden; }
        
        /* Glassmorphism for Panels */
        .glass-panel { background: rgba(24, 24, 27, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255,255,255,0.08); }
        
        /* Custom Scrollbar for Data Tables */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: #09090b; }
        ::-webkit-scrollbar-thumb { background: #27272a; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #d97706; }

        /* Sidebar Navigation Active State */
        .nav-item.active { background: #27272a; color: white; border-right: 3px solid #d97706; }
        
        /* B-BBEE Scorecard Badge */
        .score-badge { box-shadow: 0 0 20px rgba(217, 119, 6, 0.2); }
    </style>
</head>
<body class="h-screen flex overflow-hidden text-sm">

    <aside class="w-64 border-r border-border bg-surface flex flex-col z-20">
        <div class="h-16 flex items-center gap-3 px-6 border-b border-border">
            <div class="w-8 h-8 bg-gradient-to-br from-amber-500 to-amber-700 rounded flex items-center justify-center text-white text-xs font-bold shadow-lg">D</div>
            <div class="flex flex-col">
                <span class="font-bold tracking-tight text-white leading-none">DeltaPro</span>
                <span class="text-[10px] text-zinc-500 font-mono mt-1">ZA-ENT-V1.0</span>
            </div>
        </div>

        <div class="p-3 flex-1 overflow-y-auto space-y-6">
            
            <div>
                <div class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider mb-2 px-3">Intelligence</div>
                <button onclick="App.navigate('dashboard')" class="nav-item active w-full text-left px-3 py-2 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition flex items-center gap-3">
                    <i class="fa-solid fa-chart-pie w-4 text-center"></i> Overview
                </button>
                <button onclick="App.navigate('inference')" class="nav-item w-full text-left px-3 py-2 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition flex items-center gap-3">
                    <i class="fa-solid fa-brain w-4 text-center"></i> Skill Inference
                </button>
            </div>

            <div>
                <div class="text-[10px] font-bold text-amber-600 uppercase tracking-wider mb-2 px-3">Sovereign Compliance</div>
                <button onclick="App.navigate('compliance')" class="nav-item w-full text-left px-3 py-2 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition flex items-center gap-3">
                    <i class="fa-solid fa-scale-balanced w-4 text-center text-amber-500"></i> B-BBEE Scorecard
                </button>
                <button onclick="App.navigate('wallets')" class="nav-item w-full text-left px-3 py-2 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition flex items-center gap-3">
                    <i class="fa-solid fa-wallet w-4 text-center"></i> Talent Wallets
                </button>
            </div>

            <div>
                <div class="text-[10px] font-bold text-zinc-500 uppercase tracking-wider mb-2 px-3">System</div>
                <button onclick="App.navigate('settings')" class="nav-item w-full text-left px-3 py-2 rounded-md text-zinc-400 hover:text-white hover:bg-zinc-800 transition flex items-center gap-3">
                    <i class="fa-solid fa-shield-halved w-4 text-center"></i> Privacy (AtHash)
                </button>
            </div>
        </div>

        <div class="p-4 border-t border-border bg-black/20">
            <div class="flex items-center justify-between text-[10px] text-zinc-500">
                <span class="flex items-center gap-1.5"><i class="fa-brands fa-aws"></i> af-south-1</span>
                <span class="flex items-center gap-1.5 text-green-500"><span class="w-1.5 h-1.5 rounded-full bg-green-500 animate-pulse"></span> Online</span>
            </div>
        </div>
    </aside>

    <main class="flex-1 flex flex-col relative bg-background">
        
        <header class="h-16 border-b border-border flex items-center justify-between px-8 bg-background/80 backdrop-blur sticky top-0 z-10">
            <div>
                <h1 id="page-title" class="font-bold text-lg text-white">Dashboard</h1>
            </div>
            <div class="flex items-center gap-4">
                <div class="hidden md:flex items-center gap-2 px-3 py-1 bg-surface border border-amber-900/40 rounded-full">
                    <span class="w-2 h-2 rounded-full bg-amber-500 animate-pulse-slow"></span>
                    <span class="text-xs text-amber-500 font-medium">Audit Mode Active</span>
                </div>
                <button class="w-8 h-8 rounded-full bg-zinc-800 border border-zinc-700 hover:border-amber-500 transition flex items-center justify-center text-zinc-400">
                    <i class="fa-regular fa-user"></i>
                </button>
            </div>
        </header>

        <div id="app-view" class="flex-1 overflow-y-auto p-8 fade-in">
            </div>

    </main>

    <script>
        // --- 1. MOCK DATABASE (South African Context) ---
        const DB = {
            // Simulated Employee Data
            employees: [
                { name: "Thabo Nkosi", role: "Senior Backend Dev", race: "African", gender: "Male", spend: 45000, verified: true, skills: ["Python", "Django", "AWS"] },
                { name: "Sarah Van Zyl", role: "Data Scientist", race: "White", gender: "Female", spend: 22000, verified: true, skills: ["Pandas", "R", "SQL"] },
                { name: "Keshav Pillay", role: "Product Owner", race: "Indian", gender: "Male", spend: 15000, verified: true, skills: ["Agile", "Jira"] },
                { name: "Lindiwe Mabuza", role: "DevOps Engineer", race: "African", gender: "Female", spend: 38000, verified: false, skills: ["Docker", "K8s"] },
                { name: "James Smith", role: "Frontend Lead", race: "White", gender: "Male", spend: 12000, verified: true, skills: ["React", "Svelte"] },
                { name: "Sipho Dlamini", role: "Junior Dev", race: "African", gender: "Male", spend: 55000, verified: true, skills: ["Python", "FastAPI"] },
            ],
            // Financial Targets (Rands)
            targets: {
                skillsSpend: 4250000, // Current Spend
                skillsGoal: 6000000   // Target (6M ZAR)
            }
        };

        // --- 2. FORMATTERS ---
        const Format = {
            currency: (val) => new Intl.NumberFormat('en-ZA', { style: 'currency', currency: 'ZAR', maximumFractionDigits: 0 }).format(val),
            percent: (curr, total) => Math.round((curr / total) * 100)
        };

        // --- 3. VIEWS (The "Pages") ---
        const Views = {
            
            // --- DASHBOARD: The Executive View ---
            dashboard: () => `
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div class="glass-panel p-6 rounded-xl border-l-4 border-amber-500">
                        <div class="text-zinc-500 text-xs font-bold uppercase mb-2">Total Talent Wallets</div>
                        <div class="text-4xl font-bold text-white">${DB.employees.length * 12}</div>
                        <div class="text-xs text-green-500 mt-2 font-medium">â†‘ 5 New this month</div>
                    </div>
                    
                    <div class="glass-panel p-6 rounded-xl relative overflow-hidden group">
                        <div class="absolute right-0 top-0 p-4 opacity-10 group-hover:opacity-20 transition"><i class="fa-solid fa-coins text-6xl text-amber-500"></i></div>
                        <div class="text-amber-500 text-xs font-bold uppercase mb-2">Skills Dev Spend (YTD)</div>
                        <div class="text-3xl font-bold text-white">${Format.currency(DB.targets.skillsSpend)}</div>
                        <div class="w-full bg-zinc-800 h-1.5 mt-3 rounded-full overflow-hidden">
                            <div class="bg-amber-500 h-full" style="width: ${Format.percent(DB.targets.skillsSpend, DB.targets.skillsGoal)}%"></div>
                        </div>
                        <div class="text-xs text-zinc-500 mt-1">${Format.percent(DB.targets.skillsSpend, DB.targets.skillsGoal)}% of R6.0M Target</div>
                    </div>

                    <div class="glass-panel p-6 rounded-xl border border-border">
                        <div class="text-zinc-500 text-xs font-bold uppercase mb-2">Skill Gaps</div>
                        <div class="text-4xl font-bold text-white">3</div>
                        <div class="flex flex-wrap gap-2 mt-3">
                            <span class="px-2 py-1 bg-red-500/10 text-red-400 text-xs rounded border border-red-500/20">Security Ops</span>
                            <span class="px-2 py-1 bg-red-500/10 text-red-400 text-xs rounded border border-red-500/20">Cloud Arch</span>
                        </div>
                    </div>
                </div>

                <div class="glass-panel p-6 rounded-xl">
                    <h3 class="font-bold text-white mb-6">Real-Time Capability Map</h3>
                    <div class="h-80 w-full">
                        <canvas id="mainChart"></canvas>
                    </div>
                </div>
            `,

            // --- COMPLIANCE: The "Now" Feature for SA Market ---
            compliance: () => `
                <div class="grid lg:grid-cols-3 gap-8">
                    <div class="lg:col-span-2 space-y-6">
                        <div class="glass-panel p-8 rounded-xl bg-gradient-to-r from-surface to-amber-900/10 flex items-center justify-between border border-amber-900/30">
                            <div>
                                <h2 class="text-2xl font-bold text-white">B-BBEE Skills Scorecard</h2>
                                <p class="text-zinc-400 text-sm mt-1">Projected Level based on verified training data.</p>
                            </div>
                            <div class="text-center">
                                <div class="text-xs text-amber-500 font-bold uppercase tracking-widest mb-1">Projected Level</div>
                                <div class="w-16 h-16 rounded-full border-4 border-amber-500 flex items-center justify-center text-2xl font-bold text-white bg-black score-badge">2</div>
                            </div>
                        </div>

                        <div class="glass-panel p-6 rounded-xl">
                            <div class="flex justify-between items-center mb-4">
                                <h3 class="font-bold text-white">EAP Target Tracking</h3>
                                <button class="text-xs bg-zinc-800 px-3 py-1 rounded text-zinc-400 hover:text-white transition">Download Audit Pack</button>
                            </div>
                            <table class="w-full text-left text-sm">
                                <thead class="text-xs text-zinc-500 uppercase bg-zinc-900/50">
                                    <tr>
                                        <th class="p-3 rounded-l">Demographic</th>
                                        <th class="p-3">Spend (YTD)</th>
                                        <th class="p-3 rounded-r">Status</th>
                                    </tr>
                                </thead>
                                <tbody class="divide-y divide-zinc-800">
                                    <tr>
                                        <td class="p-3 font-medium text-white">African (Male)</td>
                                        <td class="p-3 font-mono text-zinc-300">${Format.currency(1250000)}</td>
                                        <td class="p-3"><span class="text-green-500 text-xs bg-green-500/10 px-2 py-1 rounded border border-green-500/20">Compliant</span></td>
                                    </tr>
                                    <tr>
                                        <td class="p-3 font-medium text-white">African (Female)</td>
                                        <td class="p-3 font-mono text-zinc-300">${Format.currency(980000)}</td>
                                        <td class="p-3"><span class="text-amber-500 text-xs bg-amber-500/10 px-2 py-1 rounded border border-amber-500/20">Near Target</span></td>
                                    </tr>
                                    <tr>
                                        <td class="p-3 font-medium text-white">Indian/Coloured</td>
                                        <td class="p-3 font-mono text-zinc-300">${Format.currency(450000)}</td>
                                        <td class="p-3"><span class="text-green-500 text-xs bg-green-500/10 px-2 py-1 rounded border border-green-500/20">Compliant</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div class="glass-panel p-6 rounded-xl h-fit">
                        <h3 class="font-bold text-white mb-4">Required Actions</h3>
                        <ul class="space-y-4">
                            <li class="flex gap-3 items-start p-3 bg-red-900/10 border border-red-900/30 rounded-lg">
                                <i class="fa-solid fa-triangle-exclamation text-red-500 mt-1"></i>
                                <div>
                                    <div class="text-sm text-white font-medium">Shortfall Alert</div>
                                    <div class="text-xs text-zinc-400 mt-1">Deficit of R250k in Category B/C training for Junior African Females.</div>
                                </div>
                            </li>
                            <li class="flex gap-3 items-start p-3 bg-zinc-800/50 rounded-lg">
                                <i class="fa-solid fa-file-signature text-zinc-400 mt-1"></i>
                                <div>
                                    <div class="text-sm text-white font-medium">Sign-off Pending</div>
                                    <div class="text-xs text-zinc-400 mt-1">WSP/ATR submission due in 14 days.</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            `,

            // --- WALLETS: Renamed from Directory ---
            wallets: () => `
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-xl font-bold text-white">Active Talent Wallets</h2>
                    <button class="px-4 py-2 bg-primary hover:bg-primaryHover text-white text-xs font-bold rounded-lg transition shadow-lg shadow-amber-900/20">
                        <i class="fa-solid fa-plus mr-2"></i> Issue New Wallet
                    </button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                    ${DB.employees.map(emp => `
                        <div class="glass-panel p-4 rounded-xl hover:border-zinc-500 transition group cursor-pointer relative overflow-hidden">
                            ${emp.verified ? '<div class="absolute top-0 right-0 p-2"><i class="fa-solid fa-shield-check text-green-500" title="Identity Verified by AtHash"></i></div>' : ''}
                            
                            <div class="flex items-center gap-4 mb-4">
                                <div class="w-12 h-12 rounded-full bg-zinc-800 flex items-center justify-center text-lg font-bold text-zinc-500 border border-zinc-700">${emp.name.charAt(0)}</div>
                                <div>
                                    <div class="font-bold text-white">${emp.name}</div>
                                    <div class="text-xs text-zinc-500">${emp.role}</div>
                                </div>
                            </div>
                            
                            <div class="space-y-2 border-t border-white/5 pt-3">
                                <div class="flex justify-between text-xs">
                                    <span class="text-zinc-500">Skills Spend</span>
                                    <span class="text-amber-500 font-mono font-medium">${Format.currency(emp.spend)}</span>
                                </div>
                                <div class="flex justify-between text-xs">
                                    <span class="text-zinc-500">Demographic</span>
                                    <span class="text-zinc-400">${emp.race} / ${emp.gender}</span>
                                </div>
                                <div class="flex flex-wrap gap-1 mt-2">
                                    ${emp.skills.map(s => `<span class="px-1.5 py-0.5 bg-zinc-800 text-[10px] text-zinc-400 rounded">${s}</span>`).join('')}
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `,

            // --- INFERENCE: The Simulation ---
            inference: () => `
                <div class="max-w-2xl mx-auto text-center pt-10">
                    <div class="w-20 h-20 bg-zinc-800 rounded-2xl mx-auto flex items-center justify-center mb-6 border border-zinc-700">
                        <i class="fa-solid fa-wand-magic-sparkles text-4xl text-amber-500"></i>
                    </div>
                    <h2 class="text-3xl font-bold text-white mb-4">Skill Vector Inference</h2>
                    <p class="text-zinc-400 mb-8">Upload unstructured data (PDF/CSV). The AI will generate B-BBEE compliant skill records.</p>
                    
                    <div class="glass-panel border-dashed border-2 border-zinc-700 rounded-xl p-12 hover:border-amber-500 transition cursor-pointer group" onclick="alert('Demo: Integrating AtHash Secure Tunnel...')">
                        <i class="fa-solid fa-cloud-arrow-up text-3xl text-zinc-500 group-hover:text-amber-500 mb-4 transition"></i>
                        <h3 class="text-white font-medium">Drop Training Registers or CVs</h3>
                        <p class="text-xs text-zinc-500 mt-2">Secure Upload via AtHash Tunnel (RSA-2048)</p>
                    </div>
                </div>
            `,

            // --- SETTINGS: Privacy ---
            settings: () => `
                <div class="max-w-3xl">
                    <h2 class="text-xl font-bold text-white mb-6">AtHash Privacy Layer</h2>
                    <div class="glass-panel p-6 rounded-xl">
                        <div class="flex items-center justify-between py-4 border-b border-zinc-800">
                            <div>
                                <div class="text-white font-medium">Mask PII (POPIA Compliance)</div>
                                <div class="text-xs text-zinc-500">Anonymize names and ID numbers in reports.</div>
                            </div>
                            <i class="fa-solid fa-toggle-on text-2xl text-green-500 cursor-pointer"></i>
                        </div>
                        <div class="flex items-center justify-between py-4">
                            <div>
                                <div class="text-white font-medium">Data Residency</div>
                                <div class="text-xs text-zinc-500">Ensure data remains within South African borders.</div>
                            </div>
                            <span class="text-xs bg-zinc-800 border border-zinc-700 px-2 py-1 rounded text-zinc-300">Cape Town (af-south-1)</span>
                        </div>
                    </div>
                </div>
            `
        };

        // --- 4. CONTROLLER (Navigation & Charting) ---
        const App = {
            init() {
                this.navigate('dashboard');
            },

            navigate(viewName) {
                // UI: Update Active Sidebar Link
                document.querySelectorAll('.nav-item').forEach(el => el.classList.remove('active'));
                event?.currentTarget?.classList.add('active');

                // Logic: Set Title
                const titles = {
                    dashboard: 'Executive Dashboard',
                    compliance: 'Sovereign Compliance Scorecard',
                    wallets: 'Talent Wallet Directory',
                    inference: 'AI Inference Engine',
                    settings: 'System Configuration'
                };
                document.getElementById('page-title').innerText = titles[viewName] || 'DeltaPro';

                // Logic: Render View
                document.getElementById('app-view').innerHTML = Views[viewName]();

                // Logic: Render Charts if needed
                if(viewName === 'dashboard') this.renderChart();
            },

            renderChart() {
                const ctx = document.getElementById('mainChart');
                if(!ctx) return;

                new Chart(ctx, {
                    type: 'radar',
                    data: {
                        labels: ['Python', 'Cloud', 'Security', 'Leadership', 'Agile', 'Data'],
                        datasets: [{
                            label: 'Org Capability',
                            data: [80, 65, 45, 70, 85, 60],
                            backgroundColor: 'rgba(217, 119, 6, 0.2)', // Amber
                            borderColor: '#d97706',
                            pointBackgroundColor: '#d97706',
                            borderWidth: 2
                        }, {
                            label: 'Market Baseline',
                            data: [60, 60, 60, 60, 60, 60],
                            borderColor: '#52525b', // Zinc-600
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            r: {
                                angleLines: { color: '#27272a' },
                                grid: { color: '#27272a' },
                                pointLabels: { color: '#a1a1aa', font: { size: 11 } },
                                ticks: { display: false, backdropColor: 'transparent' }
                            }
                        },
                        plugins: { legend: { display: true, labels: { color: '#e4e4e7' } } }
                    }
                });
            }
        };

        // Start the App
        window.addEventListener('DOMContentLoaded', () => App.init());
    </script>
</body>
</html>
